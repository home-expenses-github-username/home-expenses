<div class="m-3">
  <h1>Home Expenses - UI</h1>
  <p>Changed: From ssh perspective</p>

  <hr />

  <form [formGroup]="form">
    <div class="d-flex justify-content-between">
      <div class="mx-3 flex-grow-1">
        <label for="date" class="form-label">Date:</label>
        <input id="date" class="form-control" type="date" formControlName="date" />
      </div>

      <div class="mx-3 flex-grow-1">
        <label for="category" class="form-label">Category:</label>

        <select id="category" class="form-select" formControlName="category">
          <option [value]="'food'">Food</option>
          <option [value]="'housing'">Housing</option>
          <option [value]="'transportation'">Transportation</option>
        </select>
      </div>

      <div class="mx-3 flex-grow-1">
        <label for="cost" class="form-label">Category:</label>
        <input id="cost" class="form-control" type="number" formControlName="cost" />
      </div>

      <div class="mx-3 flex-grow-1">
        <label for="comment" class="form-label">Comment:</label>
        <input id="comment" class="form-control" formControlName="comment" />
      </div>
    </div>

    <div class="d-flex justify-content-end mx-3 mt-2">
      <button type="button" class="btn btn-primary">Add</button>
    </div>
  </form>

  <ng-container *ngIf="isLoading$ | async; else showContent">
    <ng-container *ngTemplateOutlet="spinner"></ng-container>
  </ng-container>

  <ng-template #showContent>
    <ng-container *ngIf="expenses$ | async as expenses">
      <table *ngIf="expenses" class="table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Category</th>
            <th>Cost</th>
            <th>Comment</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let expense of expenses">
            <td>{{ expense.date }}</td>
            <td>{{ expense.category }}</td>
            <td>{{ expense.cost }}</td>
            <td>{{ expense.comment }}</td>
          </tr>
        </tbody>
      </table>
    </ng-container>
  </ng-template>
</div>

<ng-template #spinner>
  <div class="d-flex justify-content-center">
    <div class="spinner-border text-muted"></div>
  </div>
</ng-template>
